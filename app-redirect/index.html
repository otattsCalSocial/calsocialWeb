<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Open Event Details</title>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const eventId = 123; // Replace with dynamic event ID as needed
      const deepLink = `calsocial://event/${eventId}`; // Custom scheme with path
      const universalLink = `https://cal.social/event/${eventId}`; // Universal link with path
      const appStoreURL = 'https://apps.apple.com/app/calsocial/id6738835548';
      const playStoreURL = 'https://play.google.com/store/apps/details?id=social.cal.calsocial'; // Ensure package name is correct

      // Determine platform and attempt to open the app
      if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
        // Try to open the app using the custom scheme
        window.location.href = deepLink;

        // Fallback to universal link or App Store after a delay
        setTimeout(function() {
          window.location.href = universalLink;

          setTimeout(function() {
            window.location.href = appStoreURL; // Final fallback
          }, 1000);
        }, 1500);
      } else if (/Android/i.test(navigator.userAgent)) {
        // Try to open the app using the custom scheme
        window.location.href = deepLink;

        // Fallback to Play Store after a delay
        setTimeout(function() {
          window.location.href = playStoreURL;
        }, 1500);
      } else {
        // For unsupported devices, redirect to the website
        window.location.href = universalLink;
      }
    });
  </script>
</head>
<body>
  <p>Opening CalSocial to Event Details...</p>
</body>
</html>
