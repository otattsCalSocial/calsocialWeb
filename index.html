<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting to CalSocial</title>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var appStoreURL = 'https://apps.apple.com/app/calsocial/id6738835548'; // Your App Store URL
      var playStoreURL = 'https://play.google.com/store/apps/details?id=com.yourcompany.calsocial'; // Your Play Store URL
      var fallbackTimeout;

      // Function to redirect to the App Store
      function redirectToStore() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        if (/iPhone|iPad|iPod/i.test(userAgent)) {
          // Redirect to the App Store for iOS
          window.location.href = appStoreURL;
        } else if (/Android/i.test(userAgent)) {
          // Redirect to the Play Store for Android
          window.location.href = playStoreURL;
        } else {
          // Fallback to your website for other platforms
          window.location.href = 'https://cal.social';
        }
      }

      // Attempt to open the app using a custom URL scheme
      try {
        // Create an invisible iframe to open the app without causing an error
        var iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = 'calsocial://'; // Replace with your custom URL scheme
        document.body.appendChild(iframe);

        // If the app isn't installed, redirect to the App Store after a short delay
        fallbackTimeout = setTimeout(redirectToStore, 1500);
      } catch (e) {
        // If thereâ€™s any issue with the custom URL scheme, fallback immediately
        redirectToStore();
      }

      // Clear the fallback timeout if the app successfully opens
      window.addEventListener('pagehide', function () {
        clearTimeout(fallbackTimeout);
      });
    });
  </script>
</head>
<body>
  <p>Redirecting to the app...</p>
</body>
</html>
